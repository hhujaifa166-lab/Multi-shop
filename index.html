<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Multi Shop</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø-‡¶∂‡¶™ ‚Äî Shop</title>
  <style>
    :root{--bg:#0b1226;--card:#0f172a;--muted:#111827;--text:#e6eef8;--accent:#16a34a}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Arial;background:linear-gradient(180deg,#061028,#0b1226);color:var(--text)}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:rgba(2,6,23,.6);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.04)}
    a{color:var(--text);text-decoration:none}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,#07102a,#0f172a);border:1px solid rgba(255,255,255,.04);padding:12px;border-radius:12px;display:flex;flex-direction:column;gap:10px}
    .card img{width:100%;height:150px;object-fit:cover;border-radius:8px;border:1px solid rgba(255,255,255,.03)}
    .price{font-weight:700}
    .btn{cursor:pointer;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.04);background:transparent;color:var(--text)}
    .btn.primary{background:var(--accent);color:#03260f;border-color:#0f6b36}
    .layout{display:grid;grid-template-columns:2fr 1fr;gap:18px;margin-top:18px}
    @media (max-width:900px){ .layout{grid-template-columns:1fr} }
    .panel{background:#061427;border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,.03)}
    h2{margin:0 0 8px 0}
    .cart-item{display:flex;gap:10px;align-items:center;border-radius:10px;padding:8px;border:1px solid rgba(255,255,255,.03);margin-bottom:8px}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    input[type="text"],input[type="tel"],textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.04);background:transparent;color:var(--text)}
    textarea{min-height:80px;resize:vertical}
    .muted{opacity:.8;font-size:.9rem}
    .notice{padding:10px;border-radius:8px;margin-bottom:8px}
    .ok{background:#052e13;color:#bbf7d0}
    .err{background:#2b0b0b;color:#fed7aa}
    footer{margin:30px 0;text-align:center;opacity:.6}
    .pill{background:#03122a;padding:6px 10px;border-radius:999px;font-size:.85rem;border:1px solid rgba(255,255,255,.03)}
  </style>
</head>
<body>
  <header>
    <div style="font-weight:700;font-size:1.1rem">üõçÔ∏è ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø-‡¶∂‡¶™</div>
    <nav style="display:flex;gap:12px;align-items:center">
      <a href="admin.html" 
    </nav>
  </header>

  <div class="container">
    <section>
      <h2>Products</h2>
      <div id="productGrid" class="grid"></div>
      <div style="margin-top:10px" class="muted"></div>
    </section>

    <div class="layout">
      <div>
        <div class="panel" id="productListPanel">
          <h2>All Products</h2>
          <div id="allProducts" class="grid"></div>
        </div>
      </div>

      <aside>
        <div class="panel">
          <h2>Cart</h2>
          <div id="cartList"></div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <div class="muted">Subtotal</div><div id="subTotal">‡ß≥ 0</div>
          </div>
          <hr style="border:none;border-top:1px dashed rgba(255,255,255,.04);margin:10px 0">
          <h3>Place Order</h3>
          <div id="orderNotice" class="notice" style="display:none"></div>
          <form id="orderForm">
            <label>‡¶®‡¶æ‡¶Æ</label>
            <input type="text" id="custName" required />
            <label>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤</label>
            <input type="tel" id="custMobile" placeholder="01XXXXXXXXX" required />
            <label>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
            <textarea id="custAddress" required></textarea>
            <label>‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®</label>
            <select id="location">
              <option value="inside">‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶§‡¶∞‡ßá (‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡ß≥70)</option>
              <option value="outside">‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá (‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡ß≥120)</option>
            </select>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div>Delivery</div><div id="deliveryFee">‡ß≥ 0</div>
            </div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:700">Total</div><div id="grandTotal" style="font-weight:800">‡ß≥ 0</div>
            </div>

            <div style="margin-top:12px;display:flex;gap:8px">
              <button class="btn primary" type="submit">Place Order</button>
              <button type="button" class="btn" id="clearCartBtn">Clear Cart</button>
            </div>
          </form>
        </div>

        <div class="panel" style="margin-top:12px">
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            
            
          </div>
        </div>
      </aside>
    </div>

    <footer>¬© <span id="year">2025</span> ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø-‡¶∂‡¶™ ‚Äî 
  </div>

<script>
  // ---------- Utilities ----------
  const STORAGE_PRODUCTS = 'ms_products_v1';
  const STORAGE_ORDERS = 'ms_orders_v1';
  const STORAGE_CART = 'ms_cart_v1';

  function save(key, v){ localStorage.setItem(key, JSON.stringify(v)); }
  function load(key, fallback){ try{ const t=localStorage.getItem(key); return t?JSON.parse(t):fallback }catch(e){ return fallback } }
  function fmt(n){ return Number(n||0).toLocaleString('en-IN') }

  // ---------- State ----------
  let products = load(STORAGE_PRODUCTS, []);
  let cart = load(STORAGE_CART, []);
  let orders = load(STORAGE_ORDERS, []);

  // ---------- Render Products ----------
  const productGrid = document.getElementById('productGrid');
  const allProducts = document.getElementById('allProducts');

  function renderProductsGrid(){
    products = load(STORAGE_PRODUCTS, []);
    if(!products.length){
      productGrid.innerHTML = '<div class="muted">‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡ßá‡¶á ‚Äî Admin ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ Demo ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
      allProducts.innerHTML = '';
      return;
    }
    productGrid.innerHTML = products.map(p=>`
      <div class="card">
        <img src="${p.image}" alt="${escapeHtml(p.name)}" />
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700">${escapeHtml(p.name)}</div>
            <div class="muted">‡ß≥ ${fmt(p.price)}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <button class="btn primary" onclick="addToCart('${p.id}')">Add</button>
          </div>
        </div>
      </div>
    `).join('');
    allProducts.innerHTML = products.map(p=>`
      <div class="card" style="padding:10px;">
        <div style="display:flex;gap:10px;align-items:center">
          <img src="${p.image}" style="width:64px;height:64px;object-fit:cover;border-radius:8px" />
          <div style="flex:1">
            <div style="font-weight:700">${escapeHtml(p.name)}</div>
            <div class="muted">‡ß≥ ${fmt(p.price)}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <button class="btn" onclick="openProductEdit('${p.id}')">Edit</button>
            <button class="btn" onclick="removeProduct('${p.id}')">Delete</button>
          </div>
        </div>
      </div>
    `).join('');
  }

  // ---------- Cart ----------
  const cartList = document.getElementById('cartList');
  const subTotalEl = document.getElementById('subTotal');
  const deliveryFeeEl = document.getElementById('deliveryFee');
  const grandTotalEl = document.getElementById('grandTotal');
  const locationEl = document.getElementById('location');
  const orderNotice = document.getElementById('orderNotice');

  function renderCart(){
    cart = load(STORAGE_CART, []);
    if(!cart.length){
      cartList.innerHTML = '<div class="muted">‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø</div>';
      subTotalEl.textContent = '‡ß≥ 0';
      updateTotals();
      return;
    }
    cartList.innerHTML = cart.map((c,i)=>`
      <div class="cart-item">
        <img src="${c.image}" alt="${escapeHtml(c.name)}" />
        <div style="flex:1">
          <div style="font-weight:700">${escapeHtml(c.name)}</div>
          <div class="muted">‡ß≥ ${fmt(c.price)} √ó ${c.qty}</div>
        </div>
        <div class="qty">
          <button class="btn" onclick="changeQty(${i}, -1)">-</button>
          <div style="min-width:28px;text-align:center">${c.qty}</div>
          <button class="btn" onclick="changeQty(${i}, 1)">+</button>
        </div>
        <div style="margin-left:8px">
          <button class="btn" onclick="removeFromCart(${i})">Remove</button>
        </div>
      </div>
    `).join('');
    const subtotal = cart.reduce((s,i)=>s + i.price * i.qty, 0);
    subTotalEl.textContent = '‡ß≥ ' + fmt(subtotal);
    updateTotals();
  }

  function addToCart(productId){
    const p = products.find(x=>x.id===productId);
    if(!p){ alert('Product not found'); return; }
    const existing = cart.find(x=>x.id===productId);
    if(existing) existing.qty++;
    else cart.push({ id:p.id, name:p.name, price: Number(p.price), image:p.image, qty: 1 });
    save(STORAGE_CART, cart);
    renderCart();
    showNotice('Added to cart', true);
  }

  function changeQty(index, delta){
    cart[index].qty = Math.max(1, cart[index].qty + delta);
    save(STORAGE_CART, cart);
    renderCart();
  }
  function removeFromCart(index){
    if(!confirm('‡¶è‡¶á ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡¶ü‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?')) return;
    cart.splice(index,1);
    save(STORAGE_CART, cart);
    renderCart();
  }
  document.getElementById('clearCartBtn').addEventListener('click', ()=>{ if(confirm('‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?')){ cart=[]; save(STORAGE_CART, cart); renderCart(); } });

  // ---------- Totals & Delivery ----------
  function getDeliveryFee(){
    return (locationEl.value === 'inside') ? 70 : 120;
  }
  function updateTotals(){
    const subtotal = cart.reduce((s,i)=>s + i.price * i.qty, 0);
    const delivery = cart.length ? getDeliveryFee() : 0;
    deliveryFeeEl.textContent = '‡ß≥ ' + fmt(delivery);
    grandTotalEl.textContent = '‡ß≥ ' + fmt(subtotal + delivery);
  }
  locationEl.addEventListener('change', updateTotals);

  // ---------- Order Submit ----------
  document.getElementById('orderForm').addEventListener('submit', function(e){
    e.preventDefault();
    if(!cart.length){ showOrderNotice('‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‚Äî ‡¶Ü‡¶ó‡ßá ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', false); return; }
    const name = document.getElementById('custName').value.trim();
    const mobile = document.getElementById('custMobile').value.trim();
    const address = document.getElementById('custAddress').value.trim();
    const location = locationEl.value;
    if(!name || !mobile || !address){ showOrderNotice('‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', false); return; }

    const subtotal = cart.reduce((s,i)=>s + i.price * i.qty, 0);
    const delivery = getDeliveryFee();
    const grand = subtotal + delivery;
    const id = 'ORD-' + Date.now().toString().slice(-8);

    const order = {
      id, createdAt: new Date().toISOString(),
      customer: { name, mobile, address, location },
      items: cart.map(i=>({ id:i.id, name:i.name, price:i.price, qty:i.qty })),
      subtotal, delivery, total: grand, status: 'new'
    };

    orders = load(STORAGE_ORDERS, []);
    orders.unshift(order);
    save(STORAGE_ORDERS, orders);

    // clear cart & form
    cart = []; save(STORAGE_CART, cart); renderCart();
    this.reset();
    updateTotals();

    showOrderNotice(`‚úÖ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶π‡ßü‡ßá‡¶õ‡ßá! Order ID: ${id}`, true);
  });

  function showOrderNotice(txt, ok=true){
    orderNotice.textContent = txt;
    orderNotice.className = (ok? 'notice ok' : 'notice err');
    orderNotice.style.display = 'block';
    setTimeout(()=> orderNotice.style.display='none', 6000);
  }

  // ---------- Demo products helper ----------
  document.getElementById('loadDemo').addEventListener('click', ()=>{
    if(!confirm('Demo ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶¨‡ßá‡¶®? (‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ì‡¶≠‡¶æ‡¶∞‡¶∞‡¶æ‡¶á‡¶ü ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá)')) return;
    const demo = [
      { id: 'p_'+Date.now()+1, name:'Bluetooth Earbuds', price:1299, image:'https://images.unsplash.com/photo-1590658268037-6bf12165a8df?q=80&w=800&auto=format&fit=crop' },
      { id: 'p_'+(Date.now()+2), name:'Smart Watch', price:2499, image:'https://images.unsplash.com/photo-1517414204284-0eece9e79640?q=80&w=800&auto=format&fit=crop' },
      { id: 'p_'+(Date.now()+3), name:'Wireless Mouse', price:699, image:'https://images.unsplash.com/photo-1541542684-4a6c61a34f33?q=80&w=800&auto=format&fit=crop' },
      { id: 'p_'+(Date.now()+4), name:'Backpack', price:1590, image:'https://images.unsplash.com/photo-1514477917009-389c76a86b68?q=80&w=800&auto=format&fit=crop' }
    ];
    save(STORAGE_PRODUCTS, demo);
    products = demo;
    renderProductsGrid();
    showNotice('Demo products loaded', true);
  });

  // ---------- Notices ----------
  function showNotice(txt, ok=true){
    const n = document.createElement('div');
    n.textContent = txt;
    n.className = ok ? 'notice ok' : 'notice err';
    n.style.position = 'fixed';
    n.style.right = '18px';
    n.style.top = '18px';
    n.style.zIndex = 9999;
    document.body.appendChild(n);
    setTimeout(()=> n.remove(), 3000);
  }

  // ---------- Admin navigation ----------
  document.getElementById('viewOrders').addEventListener('click', ()=>{ window.location.href = 'admin.html'; });
  document.getElementById('exportOrders').addEventListener('click', ()=>{
    const data = JSON.stringify(load(STORAGE_ORDERS, []), null, 2);
    const blob = new Blob([data], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'orders.json'; a.click(); URL.revokeObjectURL(url);
  });

  // ---------- Product remove/edit helpers (open admin page) ----------
  function removeProduct(id){
    if(!confirm('‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?')) return;
    products = load(STORAGE_PRODUCTS, []);
    products = products.filter(p=>p.id !== id);
    save(STORAGE_PRODUCTS, products);
    renderProductsGrid();
    showNotice('Product deleted', true);
  }
  function openProductEdit(id){
    // open admin page and pass query param
    window.location.href = 'admin.html?edit=' + encodeURIComponent(id);
  }

  // ---------- Escape helper ----------
  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c])); }

  // ---------- Init ----------
  document.getElementById('year').textContent = new Date().getFullYear();
  renderProductsGrid();
  renderCart();
  updateTotals();

  // expose some functions for inline onclick
  window.addToCart = addToCart;
  window.removeProduct = removeProduct;
  window.openProductEdit = openProductEdit;
  window.changeQty = changeQty;
  window.removeFromCart = removeFromCart;
</script>
</body>
</html>
<!-- partial -->
  
</body>
</html>
